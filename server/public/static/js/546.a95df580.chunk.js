"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[546],{5546:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var s=a(2791),l=a(1087),n=a(2426),r=a.n(n),c=a(1692),u=a(3990),o=a(5140),i=a(8844),m=a(2556),d=a(6106),h=a(914),g=a(4106),x=a(6834),p=a(7070),j=a(3832),S=a(3887),Z=a(3352);const k=e=>{const[t,a]=(0,s.useState)(e);return[t,e=>{const{name:s,value:l}=e.target;a({...t,[s]:l})},()=>{a(e)}]};var y=a(2254),f=a(9434),I=a(5821),_=a(184);const{Search:C}=c.default,{Content:v}=u.default;const w=function(){const e=(0,f.I0)(),t=(0,f.v9)((e=>e.user)),[a,n]=(0,s.useState)(!1),[c,u]=(0,s.useState)([]),[w,z]=(0,s.useState)(t.page),[N,P]=(0,s.useState)(t.total),[T,U]=(0,s.useState)(!1),[M,b]=(0,s.useState)(t.pageSize),[A,D]=(0,s.useState)(null),[E,F]=k({}),[q]=o.Z.useForm(),Y=[{title:"No",dataIndex:"_id",key:"no",width:"70px",render:(e,t,a)=>(0,_.jsxs)(_.Fragment,{children:[(w-1)*M+a+1," ",t.socketId.length>0?(0,_.jsx)(i.Z,{status:"success"}):(0,_.jsx)(i.Z,{status:"default"})]})},{title:"Name",dataIndex:"name",key:"name"},{title:"Email",dataIndex:"email",key:"email"},{title:"UTM source",dataIndex:"utm_source",key:"utm_source"},{title:"UTM medium",dataIndex:"utm_medium",key:"utm_medium"},{title:"UTM capmaign",dataIndex:"utm_capmaign",key:"utm_capmaign"},{title:"UTM content",dataIndex:"utm_content",key:"utm_content"},{title:"Date",dataIndex:"createdAt",key:"createdAt",render:e=>r()(e).format("MM/DD/YY hh:mm A")},{title:"Projects",dataIndex:"projects",key:"projects",render:(e,t)=>{let a=e.reduce(((e,t)=>e+t.resultImages.filter((e=>"pending"==e.status||"processing"==e.status)).length),0);return(0,_.jsx)(l.rU,{to:"/projects/".concat(t._id),children:(0,_.jsx)(i.Z,{status:"success",count:a,children:(0,_.jsxs)(m.ZP,{size:"small",children:[(null===e||void 0===e?void 0:e.length)||0,"/",e.reduce(((e,t)=>e+t.resultImages.length),0)]})})})}}];(0,s.useEffect)((()=>{B()}),[w,M]);const B=t=>{U(!0),(async e=>{try{return(await(0,Z.A_)("users",e)).data}catch(t){return console.log("[GET users error]",t),{users:[],total:0}}})({...E,page:t||w,limit:M}).then((t=>{U(!1),u(t.users.map((e=>({...e,key:e._id})))),P(t.total),e((0,I.R)({total:t.total,page:w,pageSize:M}))}))},G=()=>{1==w?B(1):z(1)};return(0,_.jsxs)(v,{className:"mx-auto p-2 px-5 my-5",children:[(0,_.jsxs)(d.Z,{gutter:[16,16],children:[(0,_.jsx)(h.Z,{sm:12,md:8,lg:6,xl:4,children:(0,_.jsx)(C,{placeholder:"Name...",allowClear:!0,value:E.name,name:"name",size:"large",onChange:F,onSearch:G})}),(0,_.jsx)(h.Z,{sm:12,md:8,lg:6,xl:4,children:(0,_.jsx)(C,{placeholder:"Email...",allowClear:!0,value:E.email,name:"email",size:"large",onChange:F,onSearch:G})}),(0,_.jsx)(h.Z,{sm:12,md:8,lg:6,xl:4,children:(0,_.jsx)(C,{placeholder:"Utm Source...",allowClear:!0,value:E.utm_source,name:"utm_source",size:"large",onChange:F,onSearch:G})}),(0,_.jsx)(h.Z,{sm:12,md:8,lg:6,xl:4,children:(0,_.jsx)(C,{placeholder:"Utm Campaign...",allowClear:!0,value:E.utm_campaign,name:"utm_campaign",size:"large",onChange:F,onSearch:G})}),(0,_.jsxs)(h.Z,{span:24,children:[(0,_.jsx)(g.Z,{loading:T,columns:Y,dataSource:c,pagination:!1}),(0,_.jsx)("div",{className:"text-right mt-2",children:(0,_.jsx)(x.Z,{showQuickJumper:!0,showSizeChanger:!0,pageSize:M,current:w,total:N,onChange:(e,t)=>{z(e),b(t)}})})]})]}),(0,_.jsx)(p.Z,{open:a,title:"Increase plan",okText:"Submit",cancelText:"Cancel",onCancel:()=>n(!1),onOk:()=>{q.validateFields().then((async e=>{U(!0);await(0,y.om)({...e,userId:A._id});j.ZP.success("Successfully change plan limit"),B(),n(!1)})).catch((e=>{console.log("Validate Failed:",e)}))},okButtonProps:{loading:T},children:(0,_.jsxs)(o.Z,{form:q,layout:"vertical",children:[(0,_.jsx)(o.Z.Item,{name:"property",label:"Property",rules:[{required:!0,message:"Please input the count of property"}],children:(0,_.jsx)(S.Z,{className:"w-full",size:"large",min:1})}),(0,_.jsx)(o.Z.Item,{name:"document",label:"Document",rules:[{required:!0,message:"Please input the count of document"}],children:(0,_.jsx)(S.Z,{className:"w-full",size:"large",min:1})})]})})]})}}}]);
//# sourceMappingURL=546.a95df580.chunk.js.map